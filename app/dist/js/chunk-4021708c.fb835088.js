(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4021708c"],{"2f1e":function(e,t,n){"use strict";n("79fb")},"79fb":function(e,t,n){},8591:function(e,t,n){},"8a5d":function(e,t,n){"use strict";var a=n("7a23"),i={class:"v-spinner"};function s(e,t,n,s,r,o){return Object(a["S"])((Object(a["y"])(),Object(a["h"])("div",i,[Object(a["i"])("div",{class:"v-pulse v-pulse1",style:Object(a["u"])([r.spinnerStyle,r.spinnerDelay1])},null,4),Object(a["i"])("div",{class:"v-pulse v-pulse2",style:Object(a["u"])([r.spinnerStyle,r.spinnerDelay2])},null,4),Object(a["i"])("div",{class:"v-pulse v-pulse3",style:Object(a["u"])([r.spinnerStyle,r.spinnerDelay3])},null,4)],512)),[[a["P"],n.loading]])}var r={name:"PulseLoader",props:{loading:{type:Boolean,default:!0},color:{type:String,default:"#5dc596"},size:{type:String,default:"15px"},margin:{type:String,default:"2px"},radius:{type:String,default:"100%"}},data:function(){return{spinnerStyle:{backgroundColor:this.color,width:this.size,height:this.size,margin:this.margin,borderRadius:this.radius,display:"inline-block",animationName:"v-pulseStretchDelay",animationDuration:"0.75s",animationIterationCount:"infinite",animationTimingFunction:"cubic-bezier(.2,.68,.18,1.08)",animationFillMode:"both"},spinnerDelay1:{animationDelay:"0.12s"},spinnerDelay2:{animationDelay:"0.24s"},spinnerDelay3:{animationDelay:"0.36s"}}}};n("2f1e");r.render=s;t["a"]=r},a55b:function(e,t,n){"use strict";n.r(t);n("b0c0");var a=n("7a23");Object(a["B"])("data-v-53b0142e");var i={class:"container"},s={key:0,class:"selector"},r=Object(a["i"])("h2",null,"Register or login",-1),o={class:"flex wrap justify-center"},l=Object(a["i"])("p",null,[Object(a["i"])("small",null,"v1.0b")],-1),c={key:1,class:"register flex wrap justify-center"},u=Object(a["i"])("h2",null,"Register",-1),d={key:0,class:"warn"},b={key:1,class:"warn"},p=Object(a["l"])("That email is already registered. "),h=["disabled"],g={key:2,class:"login flex wrap justify-center"},O=Object(a["i"])("h2",null,"Login",-1),j={key:0,class:"warn"},m=["disabled"],f={key:3,class:"created"},w=Object(a["i"])("h2",null,"Your user has been created.",-1);function y(e,t,n,y,v,k){var U=Object(a["G"])("pulse-loader");return Object(a["y"])(),Object(a["h"])("div",i,[v.selector?(Object(a["y"])(),Object(a["h"])("div",s,[r,Object(a["i"])("div",o,[Object(a["i"])("button",{class:"button medium ml2",onClick:t[0]||(t[0]=function(){return k.showRegister&&k.showRegister.apply(k,arguments)})},"Register"),Object(a["i"])("button",{class:"button medium",onClick:t[1]||(t[1]=function(){return k.showLogin&&k.showLogin.apply(k,arguments)})},"Login")]),l])):Object(a["g"])("",!0),v.register?(Object(a["y"])(),Object(a["h"])("div",c,[u,Object(a["i"])("p",null,[Object(a["i"])("a",{href:"#",onClick:t[2]||(t[2]=function(){return k.showLogin&&k.showLogin.apply(k,arguments)})},"Login instead?")]),Object(a["S"])(Object(a["i"])("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=function(e){return v.email=e}),placeholder:"Email"},null,512),[[a["O"],v.email]]),Object(a["S"])(Object(a["i"])("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=function(e){return v.name=e}),placeholder:"Name",id:"Name"},null,512),[[a["O"],v.name]]),Object(a["S"])(Object(a["i"])("input",{onKeyup:t[5]||(t[5]=Object(a["T"])((function(){return k.makeUser&&k.makeUser.apply(k,arguments)}),["enter"])),type:"password","onUpdate:modelValue":t[6]||(t[6]=function(e){return v.password=e}),placeholder:"Password"},null,544),[[a["O"],v.password]]),v.warn?(Object(a["y"])(),Object(a["h"])("p",d,Object(a["K"])(v.warn_message),1)):Object(a["g"])("",!0),v.warn2?(Object(a["y"])(),Object(a["h"])("p",b,[p,Object(a["i"])("a",{href:"#",onClick:t[7]||(t[7]=function(){return k.showLogin&&k.showLogin.apply(k,arguments)})},"Login instead?")])):Object(a["g"])("",!0),Object(a["m"])(U,{loading:v.loading},null,8,["loading"]),Object(a["i"])("button",{class:"button",disabled:v.loading,type:"button",onClick:t[8]||(t[8]=function(){return k.makeUser&&k.makeUser.apply(k,arguments)})},"Register",8,h)])):Object(a["g"])("",!0),v.login?(Object(a["y"])(),Object(a["h"])("div",g,[O,Object(a["i"])("p",null,[Object(a["i"])("a",{href:"#",onClick:t[9]||(t[9]=function(){return k.showRegister&&k.showRegister.apply(k,arguments)})},"Register instead?")]),Object(a["S"])(Object(a["i"])("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=function(e){return v.email=e}),placeholder:"Email"},null,512),[[a["O"],v.email]]),Object(a["S"])(Object(a["i"])("input",{onKeyup:t[11]||(t[11]=Object(a["T"])((function(){return k.validateUser&&k.validateUser.apply(k,arguments)}),["enter"])),type:"password","onUpdate:modelValue":t[12]||(t[12]=function(e){return v.password=e}),placeholder:"Password"},null,544),[[a["O"],v.password]]),Object(a["m"])(U,{loading:v.loading},null,8,["loading"]),v.warn?(Object(a["y"])(),Object(a["h"])("p",j,Object(a["K"])(v.warn_message),1)):Object(a["g"])("",!0),Object(a["i"])("button",{class:"button",disabled:v.loading,type:"button",onClick:t[13]||(t[13]=function(){return k.validateUser&&k.validateUser.apply(k,arguments)})},"Login",8,m)])):Object(a["g"])("",!0),v.created?(Object(a["y"])(),Object(a["h"])("div",f,[Object(a["i"])("h1",null,"Welcome "+Object(a["K"])(v.name)+"!",1),w,Object(a["i"])("button",{class:"button",type:"button",onClick:t[14]||(t[14]=function(t){return e.$router.push("/")})},"Go to Dashboard")])):Object(a["g"])("",!0)])}Object(a["z"])();var v=n("5530"),k=n("1da1"),U=(n("96cf"),n("d5b5")),x=n("8a5d"),S={data:function(){return{loading:!1,warn:!1,warn2:!1,warn_message:"",selector:!0,register:!1,login:!1,created:!1,email:"",name:"",password:""}},methods:{showRegister:function(){this.selector=!1,this.register=!0,this.login=!1},showLogin:function(){this.selector=!1,this.login=!0,this.register=!1},makeUser:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(this.email&&this.name&&this.password)){e.next=37;break}return this.loading=!0,this.warn=!1,this.warn2=!1,e.next=6,U["a"].checkUser(this.email);case 6:if(t=e.sent,202!==t){e.next=14;break}return this.loading=!1,this.warn=!1,this.warn2=!0,e.abrupt("return",!1);case 14:if(204!==t){e.next=35;break}return e.next=17,U["a"].makeUser({email:this.email,name:this.name,password:this.password});case 17:if(n=e.sent,!n){e.next=33;break}return e.next=21,U["a"].validateUser({email:this.email,password:this.password});case 21:return a=e.sent,console.log("User created"),localStorage.setItem("user",JSON.stringify(Object(v["a"])(Object(v["a"])({},a[0]),{},{token:a[0]._id}))),this.$store.dispatch("setUser",Object(v["a"])(Object(v["a"])({},a[0]),{},{token:a[0]._id})),this.register=!1,this.created=!0,this.loading=!1,this.warn=!1,this.warn2=!1,e.abrupt("return",!0);case 33:return console.log("user not created"),e.abrupt("return",!1);case 35:e.next=39;break;case 37:this.warn=!0,this.warn_message="Please complete all fields.";case 39:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),validateUser:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.email||!this.password){e.next=9;break}return this.loading=!0,this.warn=!1,e.next=5,U["a"].validateUser({email:this.email,password:this.password});case 5:t=e.sent,t.length?(localStorage.setItem("user",JSON.stringify(Object(v["a"])(Object(v["a"])({},t[0]),{},{token:t[0]._id}))),this.$store.dispatch("setUser",Object(v["a"])(Object(v["a"])({},t[0]),{},{token:t[0]._id})),void 0!==t[0].habits&&this.$store.dispatch("setBadges",t[0].habits),this.$router.push("/")):(this.warn=!0,this.loading=!1,this.warn_message="Email and password are not valid."),e.next=11;break;case 9:this.warn=!0,this.warn_message="Please complete all fields.";case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},components:{PulseLoader:x["a"]},mounted:function(){this.$store.dispatch("centerLogo",!0)},beforeUnmount:function(){this.$store.dispatch("centerLogo",!1)}};n("fddd");S.render=y,S.__scopeId="data-v-53b0142e";t["default"]=S},fddd:function(e,t,n){"use strict";n("8591")}}]);
//# sourceMappingURL=chunk-4021708c.fb835088.js.map